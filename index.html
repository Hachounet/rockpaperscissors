<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <!--adding roboto font--> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <!--adding emoji font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&family=Roboto&display=swap" rel="stylesheet">
<!-- working on emoji-->
<script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
<script src="app.js"></script>
</head>

<body id="body">

    <header id="header">Rocking Papering Scissoring !</header>

    <div id="game-container">
            <div id="smartphone">
                <img src="i-phone-1228311_1920.png" alt="iphone" width="100%" height="800px"></img>
                <div id="screenpart">
                    <div id="scorepart">
                        <div class="score-container">
                            <p id="score-versus" display="block"></p>
                            <p id="score-final" display="block"></p>
                            <p id="score-text" display="block"></p>
                            </div>
                    </div>
                    <div id="buttonspart">
                        <div class="buttons-container">
                            <button class="play-buttons" data-play="rock"><span class="emoji">ü™®</span>
                            </button>
                            <button class="play-buttons" data-play="paper">üìú</button>
                            <button class="play-buttons" data-play="scissors" >‚úÇÔ∏è</button>
                            </div>

                    </div>
                 </div>
            </div>
        
    </div>
        

<script>
    twemoji.parse(document.body)

    let buttons = document.querySelectorAll(".play-buttons")




    function getUserChoice() {
        var action = this.getAttribute("data-play")
        console.log("User choice " + action) 
        return action;
    }

    buttons.forEach(function(button) {
    button.addEventListener("click", function() {
        var userChoice = getUserChoice.call(this);
        var computerChoice = getComputerChoice();
        playRound(userChoice, computerChoice);
    });
});


// Fonctions pour obtenir le choix du PC via Math.random
function getComputerChoice() {
    let randomValue = Math.floor(Math.random() * 100);
    if (randomValue <= 33){
        return "rock";
    }
    else if (randomValue >= 66){
        return "scissors"

    }
    else {
        return "paper";
    }

}


let computerChoice
let userChoice

// Fonction pour jouer un round
function playRound(userChoice, computerChoice) {
    var scoreTextLive = document.getElementById("score-text")
    var scoreVersus = document.getElementById("score-versus")
   
    computerChoice = getComputerChoice();

    scoreVersus.textContent = `You have choose ${userChoice} and I choose ${computerChoice}`;
    if (userChoice === computerChoice) {
        scoreTextLive.textContent = "TIE ! New round !";
        
    }
    else if (userChoice === "rock" && computerChoice === "paper" ) {
        scoreTextLive.textContent = `${userChoice} " VS " ${computerChoice}`;
        scoreTextLive.textContent = "I've won ! One point for me !";
        ++computerScore;
    }
    else if (userChoice === "rock" && computerChoice === "scissors") {
        scoreTextLive.textContent = `${userChoice} " VS " ${computerChoice}`;
        scoreTextLive.textContent ="You won ! One point for you !";
        ++userScore;
    }
    else if (userChoice === "paper" && computerChoice === "rock") {
        scoreTextLive.textContent = `${userChoice} " VS " ${computerChoice}`;
        scoreTextLive.textContent = "You won ! One point for you !";
        ++userScore;
    }
    else if (userChoice === "paper" && computerChoice === "scissors") {
        scoreTextLive.textContent= `${userChoice} " VS " ${computerChoice}`;
        scoreTextLive.textContent = "I've won ! One point for me !";
        ++computerScore;
    }
    else if (userChoice === "scissors" && computerChoice === "paper") {
        scoreTextLive.textContent= `${userChoice} " VS " ${computerChoice}`;
        scoreTextLive.textContent = "You won ! One point for you !";
        ++userScore;
    } 
    else {
        // Last option : scissors vs rock, computer win
        scoreTextLive.textContent= `${userChoice} " VS " ${computerChoice}`;
        scoreTextLive.textContent = "I've won ! One point for me !";
        ++computerScore;
    }
    game();
}

//Declaration of variables outside of function to keep scores
let userScore = 0;
let computerScore = 0;

// Function game() who call other functions to play and take score. 
function game() {

    var scoreFinal = document.getElementById("score-final")

            if( userScore < 5 && computerScore < 5) {  
                scoreFinal.textContent = `Ton score est de ${userScore} et le mien est de ${computerScore}`;             
        }
        else {
            scoreFinal.textContent ="La partie est termin√©e !";
            scoreFinal.textContent +=`/!\ Ton score final est de ${userScore} et le mien est de ${computerScore} `;
        
        }

        }  








</script>
</body>
</html>